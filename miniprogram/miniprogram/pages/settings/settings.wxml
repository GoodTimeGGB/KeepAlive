<view class="container">
  <!-- æ‰«æçº¿æ•ˆæœ -->
  <view class="scan-line"></view>
  
  <!-- æ ‡é¢˜æ  -->
  <view class="header">
    <text class="header-title">SETTINGS</text>
    <text class="header-subtitle">Configuration Panel</text>
  </view>

  <!-- ä¸»è¦å†…å®¹ -->
  <view class="main-content">
    <!-- ç”¨æˆ·ç™»å½•åŒºåŸŸ -->
    <view class="section" wx:if="{{!isLoggedIn}}">
      <button class="login-btn" open-type="chooseAvatar" bind:chooseavatar="onChooseAvatar">
        <text class="login-icon">ğŸ“±</text>
        <text class="login-text">å¾®ä¿¡ä¸€é”®ç™»å½•</text>
      </button>
      <view class="login-hint">
        <text>ç™»å½•åå¯åŒæ­¥æ•°æ®åˆ°æœ¬åœ°</text>
      </view>
      
      <!-- æ˜µç§°è¾“å…¥ -->
      <view class="nickname-section" wx:if="{{tempAvatarUrl}}">
        <input 
          class="nickname-input" 
          type="nickname" 
          placeholder="è¯·è¾“å…¥æ˜µç§°" 
          bind:blur="onNicknameBlur"
        />
        <button class="save-btn" bindtap="onSaveUserInfo">ä¿å­˜</button>
      </view>
    </view>

    <!-- å·²ç™»å½•ç”¨æˆ·ä¿¡æ¯ -->
    <view class="section" wx:if="{{isLoggedIn && userInfo}}">
      <view class="user-card">
        <image class="user-avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
        <view class="user-info">
          <text class="user-name">{{userInfo.nickName}}</text>
          <text class="user-label">å·²ç™»å½•</text>
        </view>
      </view>
    </view>

    <!-- æé†’è®¾ç½® -->
    <view class="section">
      <view class="section-title">
        <text>REMINDERS</text>
      </view>
      <view class="settings-card">
        <!-- å–æ°´æé†’ -->
        <view class="setting-item">
          <view class="setting-info">
            <view class="setting-icon">ğŸ’§</view>
            <view class="setting-details">
              <text class="setting-name">Water</text>
              <text class="setting-desc">45min interval</text>
            </view>
          </view>
          <switch 
            checked="{{settings.waterReminder}}" 
            bind:change="onWaterReminderChange"
            color="#4ECDC4"
          />
        </view>

        <!-- è¿åŠ¨æé†’ -->
        <view class="setting-item">
          <view class="setting-info">
            <view class="setting-icon">ğŸ§˜</view>
            <view class="setting-details">
              <text class="setting-name">Move</text>
              <text class="setting-desc">60min interval</text>
            </view>
          </view>
          <switch 
            checked="{{settings.moveReminder}}" 
            bind:change="onMoveReminderChange"
            color="#4ECDC4"
          />
        </view>
      </view>
    </view>

    <!-- å·¥ä½œæ—¶é—´è®¾ç½® -->
    <view class="section">
      <view class="section-title">
        <text>WORK HOURS</text>
      </view>
      <view class="time-card">
        <view class="time-item">
          <text class="time-label">START</text>
          <picker mode="time" value="{{settings.remindStartTime}}" bind:change="onStartTimeChange">
            <view class="time-value">
              <text class="time-time">{{settings.remindStartTime}}</text>
              <text class="time-period">AM</text>
            </view>
          </picker>
        </view>
        
        <text class="time-arrow">â†’</text>
        
        <view class="time-item">
          <text class="time-label">END</text>
          <picker mode="time" value="{{settings.remindEndTime}}" bind:change="onEndTimeChange">
            <view class="time-value">
              <text class="time-time">{{settings.remindEndTime}}</text>
              <text class="time-period">PM</text>
            </view>
          </picker>
        </view>
      </view>
      <text class="time-hint">Notifications only during work hours</text>
    </view>

    <!-- æ‰©å±•åŠŸèƒ½ -->
    <view class="section">
      <view class="section-title">
        <text>EXTENSIONS</text>
      </view>
      <view class="extension-card">
        <button class="extension-btn" bindtap="onAddToCalendar">
          <view class="extension-info">
            <view class="extension-icon">ğŸ“…</view>
            <view class="extension-details">
              <text class="extension-name">Add to Calendar</text>
              <text class="extension-desc">ä¸€é”®æ·»åŠ ä»Šæ—¥å–æ°´è®¡åˆ’åˆ°æ—¥å†</text>
            </view>
          </view>
          <text class="extension-arrow">â†’</text>
        </button>
      </view>
    </view>

    <!-- é¡µè„š -->
    <view class="footer">
      <view class="footer-status">
        <view class="status-dot"></view>
        <text>System Operational</text>
      </view>
      <text class="footer-text">
        Programmer Gas Station v1.0
      </text>
      <text class="footer-text">
        Made with â¤ï¸ for Coders
      </text>
    </view>
  </view>
</view>
